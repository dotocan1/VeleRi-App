(self["webpackChunkveleri_app"] = self["webpackChunkveleri_app"] || []).push([[724],{

/***/ 8724:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ Administration)
});

// EXTERNAL MODULE: ./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js
var runtime_core_esm_bundler = __webpack_require__(3673);
// EXTERNAL MODULE: ./node_modules/@vue/shared/dist/shared.esm-bundler.js
var shared_esm_bundler = __webpack_require__(2323);
;// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/Administration.vue?vue&type=template&id=e4d2df46&scoped=true


const _withId = /*#__PURE__*/(0,runtime_core_esm_bundler/* withScopeId */.HX)("data-v-e4d2df46");

(0,runtime_core_esm_bundler/* pushScopeId */.dD)("data-v-e4d2df46");

const _hoisted_1 = {
  class: "q-pa-md q-gutter-sm"
};
const _hoisted_2 = {
  class: "text-h5"
};
const _hoisted_3 = {
  class: "row justify-center q-pa-md"
};
const _hoisted_4 = {
  class: "col-12",
  style: {
    "max-width": "400px"
  }
};

const _hoisted_5 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", {
  class: "text-h5 q-mt-md"
}, "Unesite osobne podatke:", -1);

const _hoisted_6 = {
  class: "col-12 q-mt-md",
  style: {
    "max-width": "400px"
  }
};

const _hoisted_7 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", {
  class: "text-h5 q-mt-md"
}, "Odredite vidljivost podataka:", -1);

const _hoisted_8 = {
  class: "col-12"
};
const _hoisted_9 = {
  class: "col-12"
};
const _hoisted_10 = {
  class: "col-12"
};
const _hoisted_11 = {
  class: "col-12"
};
const _hoisted_12 = {
  class: "col-12"
};
const _hoisted_13 = {
  class: "col-12 q-mt-md",
  style: {
    "max-width": "400px"
  }
};

const _hoisted_14 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", {
  class: "text-h5 q-mt-md"
}, "Pripadni QR kod:", -1);

const _hoisted_15 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createVNode */.Wm)("img", {
  id: "qr-code",
  class: "col-6 justify-center items-center",
  alt: ""
}, null, -1);

const _hoisted_16 = /*#__PURE__*/(0,runtime_core_esm_bundler/* createVNode */.Wm)("a", {
  id: "img-download",
  download: "qr-code.png"
}, "Preuzmite sliku", -1);

(0,runtime_core_esm_bundler/* popScopeId */.Cn)();

const render = /*#__PURE__*/_withId((_ctx, _cache, $props, $setup, $data, $options) => {
  const _component_q_banner = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-banner");

  const _component_q_card_section = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-card-section");

  const _component_q_input = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-input");

  const _component_q_btn = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-btn");

  const _component_q_card_actions = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-card-actions");

  const _component_q_card = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-card");

  const _component_q_checkbox = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-checkbox");

  const _component_q_page = (0,runtime_core_esm_bundler/* resolveComponent */.up)("q-page");

  return (0,runtime_core_esm_bundler/* openBlock */.wg)(), (0,runtime_core_esm_bundler/* createBlock */.j4)(_component_q_page, null, {
    default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_1, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_banner, {
      class: "bg-red-7 text-black"
    }, {
      default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_2, "Dobrodošli nazad, " + (0,shared_esm_bundler/* toDisplayString */.zw)($data.name) + " " + (0,shared_esm_bundler/* toDisplayString */.zw)($data.lastName) + "!", 1)]),
      _: 1
    })]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_3, [(0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_4, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      style: {
        "max-width": "400px"
      },
      class: "bg-grey-2"
    }, {
      default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card_section, null, {
        default: _withId(() => [_hoisted_5]),
        _: 1
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card_section, null, {
        default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          outlined: "",
          modelValue: $data.email,
          "onUpdate:modelValue": _cache[1] || (_cache[1] = $event => $data.email = $event),
          label: "Unesite email",
          disable: $data.disabledInput
        }, null, 8, ["modelValue", "disable"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          class: "q-mt-sm",
          outlined: "",
          modelValue: $data.telephone,
          "onUpdate:modelValue": _cache[2] || (_cache[2] = $event => $data.telephone = $event),
          label: "Unesite broj telefona",
          disable: $data.disabledInput
        }, null, 8, ["modelValue", "disable"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          class: "q-mt-sm",
          outlined: "",
          modelValue: $data.cabinet,
          "onUpdate:modelValue": _cache[3] || (_cache[3] = $event => $data.cabinet = $event),
          label: "Unesite pripadni kabinet",
          disable: $data.disabledInput
        }, null, 8, ["modelValue", "disable"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_input, {
          class: "q-mt-sm",
          outlined: "",
          modelValue: $data.carrier,
          "onUpdate:modelValue": _cache[4] || (_cache[4] = $event => $data.carrier = $event),
          label: "Unesite kolegije gdje je profesor nositelj",
          disable: $data.disabledInput
        }, null, 8, ["modelValue", "disable"])]),
        _: 1
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card_actions, {
        align: "right"
      }, {
        default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
          color: "primary",
          onClick: $options.submit,
          label: "Spremi"
        }, null, 8, ["onClick"]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
          color: "primary",
          onClick: $options.editForms,
          label: "Izmijeni"
        }, null, 8, ["onClick"])]),
        _: 1
      })]),
      _: 1
    })]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_6, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      style: {
        "max-width": "400px"
      },
      class: "bg-grey-2"
    }, {
      default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card_section, null, {
        default: _withId(() => [_hoisted_7]),
        _: 1
      }), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_8, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_checkbox, {
        modelValue: $data.emailCB,
        "onUpdate:modelValue": _cache[5] || (_cache[5] = $event => $data.emailCB = $event),
        label: "Vidljiv email",
        onClick: $options.submitCheckboxes
      }, null, 8, ["modelValue", "onClick"])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_9, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_checkbox, {
        modelValue: $data.telephoneCB,
        "onUpdate:modelValue": _cache[6] || (_cache[6] = $event => $data.telephoneCB = $event),
        label: "Vidljiv broj telefona",
        onClick: $options.submitCheckboxes
      }, null, 8, ["modelValue", "onClick"])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_10, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_checkbox, {
        modelValue: $data.cabinetCB,
        "onUpdate:modelValue": _cache[7] || (_cache[7] = $event => $data.cabinetCB = $event),
        label: "Vidljiv kabinet",
        onClick: $options.submitCheckboxes
      }, null, 8, ["modelValue", "onClick"])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_11, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_checkbox, {
        modelValue: $data.consultationsCB,
        "onUpdate:modelValue": _cache[8] || (_cache[8] = $event => $data.consultationsCB = $event),
        label: "Vidljivo vrijeme konzultacija",
        onClick: $options.submitCheckboxes
      }, null, 8, ["modelValue", "onClick"])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_12, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_checkbox, {
        modelValue: $data.carrierCB,
        "onUpdate:modelValue": _cache[9] || (_cache[9] = $event => $data.carrierCB = $event),
        label: "Vidljive informacije o nositelju kolegija",
        onClick: $options.submitCheckboxes
      }, null, 8, ["modelValue", "onClick"])])]),
      _: 1
    })])]), (0,runtime_core_esm_bundler/* createVNode */.Wm)("div", _hoisted_13, [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card, {
      style: {
        "max-width": "400px"
      },
      class: "bg-grey-2"
    }, {
      default: _withId(() => [(0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_card_section, null, {
        default: _withId(() => [_hoisted_14]),
        _: 1
      }), _hoisted_15, _hoisted_16]),
      _: 1
    })]), (0,runtime_core_esm_bundler/* createVNode */.Wm)(_component_q_btn, {
      onClick: $options.logout,
      label: "Odjava",
      class: "background-color-white q-mt-md q-ml-sm"
    }, null, 8, ["onClick"])]),
    _: 1
  });
});
;// CONCATENATED MODULE: ./src/pages/Administration.vue?vue&type=template&id=e4d2df46&scoped=true

// EXTERNAL MODULE: ./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js
var reactivity_esm_bundler = __webpack_require__(1959);
// EXTERNAL MODULE: ./node_modules/quasar/src/composables/use-quasar.js
var use_quasar = __webpack_require__(8825);
;// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!./node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./src/pages/Administration.vue?vue&type=script&lang=js

;
/* harmony default export */ const Administrationvue_type_script_lang_js = ({
  data() {
    return {
      name: '',
      lastName: '',
      emailCB: (0,reactivity_esm_bundler/* ref */.iH)(false),
      telephoneCB: (0,reactivity_esm_bundler/* ref */.iH)(false),
      cabinetCB: (0,reactivity_esm_bundler/* ref */.iH)(false),
      consultationsCB: (0,reactivity_esm_bundler/* ref */.iH)(false),
      carrierCB: (0,reactivity_esm_bundler/* ref */.iH)(false),
      email: '',
      telephone: '',
      cabinet: '',
      consultations: '',
      carrier: '',
      menuId: '',
      usersDataId: '',
      disabledInput: true,
      q: (0,use_quasar/* default */.Z)()
    };
  },

  methods: {
    logout() {
      this.$auth.signOut().then(this.$router.push('/'));
    },

    submit() {
      this.disabledInput = true;
      const docRef = this.$db.collection('UsersData').doc(this.usersDataId);
      return docRef.update({
        Email: this.email,
        Telephone: this.telephone,
        Cabinet: this.cabinet,
        Consultations: this.consultations,
        Carrier: this.carrier
      }).then(() => {
        this.$q.notify({
          type: 'positive',
          message: 'Podaci uspješno spremljeni'
        });
      }).catch(error => {
        // The document probably doesn't exist.
        console.error('Error updating document: ', error);
        this.$q.notify({
          type: 'negative',
          message: 'Podaci nisu uspješno spremljeni'
        });
      });
    },

    editForms() {
      this.disabledInput = false;
    },

    submitCheckboxes() {
      // updating data
      this.disabledInput = true;
      const docRef = this.$db.collection('Menu').doc(this.menuId);
      return docRef.update({
        isEmail: this.emailCB,
        isTelephone: this.telephoneCB,
        isCabinet: this.cabinetCB,
        isConsultations: this.consultationsCB,
        isCarrier: this.carrierCB
      }).then(() => {
        this.$q.notify({
          type: 'positive',
          message: 'Podaci uspješno spremljeni'
        });
      }).catch(error => {
        // The document probably doesn't exist.
        console.error('Error updating document: ', error);
        this.$q.notify({
          type: 'negative',
          message: 'Podaci nisu uspješno spremljeni'
        });
      });
    }

  },

  mounted() {
    const userId = this.$auth.currentUser.uid;
    const menuRef = this.$db.collection('Menu').where('UserId', '==', userId);
    const userRef = this.$db.collection('UsersData').where('UserId', '==', userId);
    menuRef.get().then(querySnapshot => {
      querySnapshot.forEach(doc => {
        const data = doc.data(); // get menu id

        this.menuId = doc.id; // This modifies the checkboxes

        this.emailCB = !!data.isEmail;
        this.telephoneCB = !!data.isTelephone;
        this.cabinetCB = !!data.isCabinet;
        this.consultationsCB = !!data.isConsultations;
        this.carrierCB = !!data.isCarrier;
      });
    }).catch(error => {
      console.log('Error getting documents: ', error);
    });
    userRef.get().then(querySnapshot => {
      querySnapshot.forEach(doc => {
        // get usersData id
        const data = doc.data();
        this.usersDataId = doc.id; // This fills in the input forms

        this.name = data.Name;
        this.lastName = data.LastName;
        this.email = data.Email;
        this.telephone = data.Telephone;
        this.cabinet = data.Cabinet;
        this.consultations = data.Consultations;
        this.carrier = data.Carrier;
      });
    }); // qr code picture

    const img = document.getElementById('qr-code');
    img.src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${userId}`;
    const btnDownloadImg = document.getElementById('img-download');
    btnDownloadImg.href = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${userId}`;
  }

});
;// CONCATENATED MODULE: ./src/pages/Administration.vue?vue&type=script&lang=js
 
// EXTERNAL MODULE: ./node_modules/quasar/src/components/page/QPage.js
var QPage = __webpack_require__(4379);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/banner/QBanner.js
var QBanner = __webpack_require__(5607);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js
var QCard = __webpack_require__(151);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js
var QCardSection = __webpack_require__(5589);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 9 modules
var QInput = __webpack_require__(1206);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js
var QCardActions = __webpack_require__(9367);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js + 3 modules
var QBtn = __webpack_require__(6114);
// EXTERNAL MODULE: ./node_modules/quasar/src/components/checkbox/QCheckbox.js + 3 modules
var QCheckbox = __webpack_require__(1420);
// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js
var runtime_auto_import = __webpack_require__(7518);
var runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);
;// CONCATENATED MODULE: ./src/pages/Administration.vue




;
Administrationvue_type_script_lang_js.render = render
Administrationvue_type_script_lang_js.__scopeId = "data-v-e4d2df46"

/* harmony default export */ const Administration = (Administrationvue_type_script_lang_js);
;








runtime_auto_import_default()(Administrationvue_type_script_lang_js, 'components', {QPage: QPage/* default */.Z,QBanner: QBanner/* default */.Z,QCard: QCard/* default */.Z,QCardSection: QCardSection/* default */.Z,QInput: QInput/* default */.Z,QCardActions: QCardActions/* default */.Z,QBtn: QBtn/* default */.Z,QCheckbox: QCheckbox/* default */.Z});


/***/ })

}]);
//# sourceMappingURL=724.js.map